# API Дерево ТН ВЭД ТКС

Программный интерфейс предназначен для построения дерева ТН ВЭД ЕАЭС.

## Запросы

Запрос на получение текущей версии:

    http://api1.tks.ru/tree.json/json/<ключ клиента>/ver.json

Запрос на получение ветви дерева ТН ВЭД:

    http://api1.tks.ru/tree.json/json/<ключ клиента>/<ID узла>.json

где

    <ключ клиента> - (*+)  
    <ID узла> - (\d{8}), дополняется до 8 цифр нолями слева

Запрос на получение списка корневых узлов дерева ТН ВЭД:

    https://api1.tks.ru/tree.json/json/<ключ клиента>/00000010.json

Запрос на поиск информации об узле дерева (например, идентификатора узла) по коду товара или его наименованию:

    https://api1.tks.ru/tree.json/json/<ключ клиента>/search/?code=<code>&searchstr=<goods_description>

где

    <code> - код товара  
    <goods_description> - наименование или часть наименования товара

Запрос на получение информации по всем кодам в виде ZIP-архива:

    http://api1.tks.ru/tree.json/json/<ключ клиента>/archive.zip

где

    <ключ клиента> - (.+)  
    

## Сценарии использования

В случае, если информация по конкретному коду либо небольшому набору кодов ТН ВЭД требуется периодически, клиент обращается к API с запросами вида:

    http://api1.tks.ru/tree.json/json/<ключ клиента>/<ID узла>.json
Полученная информация будет актуальна на момент получения запроса сервером.

В случае, если информация загружается во внутреннюю систему для дальнейшего использования, клиент с некоторой периодичностью (например, один раз в час) загружает файл с номером версии. Если полученный номер версии больше, чем сохранённый ранее, клиент скачивает ZIP-архив, содержащий в себе информацию о всех узлах дерева ТН ВЭД и о номере версии. Для этого используются запросы вида:

    http://api1.tks.ru/tree.json/json/<ключ клиента>/ver.json

    http://api1.tks.ru/tree.json/json/<ключ клиента>/archive.zip

## Описание структуры дерева ТН ВЭД ТКС

Информация о ветви дерева ТН ВЭД содержит сведения об идентификаторах узлов, кодах ТН ВЭД и наименованиях соответствующих позиций. Например, запрос

    https://api1.tks.ru/tree.json/json/<ключ клиента>/07433000.json

вернёт результат:

    [
        {
            "ID": 7434000,
            "CODE": "390110",
            "TEXT": "- полиэтилен с удельным весом менее 0,94:"
        },
        {
            "ID": 7437000,
            "CODE": "390120",
            "TEXT": "- полиэтилен с удельным весом 0,94 или более:"
        },
        {
            "ID": 7442000,
            "CODE": "3901300000",
            "TEXT": "- сополимеры этилена с винилацетатом"
        },
        {
            "ID": 7443000,
            "CODE": "3901400000",
            "TEXT": "- сополимеры этилен-альфа-олефиновые с удельным весом менее 0,94"
        },
        {
            "ID": 7444000,
            "CODE": "390190",
            "TEXT": "- прочие:"
        }
    ]
